<!-- 要求:
1. 构建一个n*n的格子(n从输入框填写) ,默认背景色都是白色,鼠标指针指上去的格子底色要变
成红色,鼠标移出时复原
2. 鼠标点击格子时背景色固定为蓝色,指针hover时也不变红。再次点击时复原成未点击的状态
3. 格子大小可用css控制,底色变化用js实现
 -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      #dynamic {
        table-layout: fixed;
        width: 200px;
      }
      #dynamic td {
        height: 30px;
        border: #cccccc 1px solid;
      }
      .bgBlue {
        background: aqua !important;
      }
      .bgPink {
        background-color: palevioletred;
      }
    </style>
  </head>
  <body>
    <section>
      <!-- 默认值怎么设置 -->
      <input type="text" id="createTable" onblur="createTable()" />
    </section>
  </body>
  <script>
    function createTable() {
      //去除重复
      let prev = document.querySelector("#dynamic") || null;
      prev ? document.body.removeChild(prev) : "";

      let n = +document.querySelector("#createTable").value;
      let str = "<tbody>";
      for (let i = 0; i < n; i++) {
        str += `<tr>`;
        for (let j = 0; j < n; j++) {
          str += `<td></td>`;
        }
        str += `</tr>`;
      }
      str += `</tbody>`;

      let table = document.createElement("table");
      table.innerHTML = str;
      //设置id，用来去除重复
      table.setAttribute("id", "dynamic");

      table.setAttribute("cellspacing", 0); //消除表格间的间距

      document.body.appendChild(table);

      changeColor(table);
    }
    function changeColor(table) {
      table.addEventListener("click", e => {
        let curNodeClass = e.target.classList;
        curNodeClass.contains("bgBlue")
          ? e.target.classList.remove("bgBlue")
          : e.target.classList.add("bgBlue");
      });
      table.addEventListener("mouseover", e => {
        console.log(e.target);
        e.target.classList.add("bgPink");
      });
      table.addEventListener("mouseout", e => {
        console.log("triggle");
        e.target.classList.remove("bgPink");
      });
    }
  </script>
</html>
